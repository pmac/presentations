<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Bedrock: From Code to Production</title>
  <meta name="description"
        content="A presentation explaining the full change procedure for the Bedrock project: the code for www.mozilla.org.">
  <meta name="author" content="Paul McLanahan and Alex Gibson">

  <link rel="stylesheet" href="../lib/tabzilla/css/tabzilla.css"/>
  <link rel="stylesheet" href="../lib/reveal/css/reveal.css"/>
  <link rel="stylesheet" href="../lib/reveal/css/theme/mozilla-devrel-dark.css"/>

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="../lib/reveal/lib/css/solarized-dark.css"/>

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../lib/reveal/css/print/pdf.css' : '../lib/reveal/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>
<body>
<section id="tabzilla">
  <a href="https://www.mozilla.org/">Mozilla</a>
</section>

<div class="reveal">
  <div class="slides">
    <section>
      <header>
        <h1>Bedrock: From Code to Prod</h1>
        <p>Taking <a href="https://www.mozilla.org">mozilla.org</a> changes from concept to The Web</p>
      </header>
    </section>

    <section>
      <section>
        <h2>Bugzilla</h2>
      </section>
    </section>

    <section>
      <section>
        <h2>Github</h2>
      </section>
    </section>

    <section>
      <section>
        <h2>L10N</h2>
      </section>
    </section>

    <section>
      <section>
        <h2>Deployment</h2>
      </section>

      <section data-markdown>
        <script type="text/template">
        ### Demo Servers

        * We have as many as we need
        * Some are pre-defined
          * e.g. www-demo1.allizom.org
          * aids in testing domain-specific things like UITour API
        * Others are for each developer
          * e.g. demo-agibson.us-west.moz.works
        * Still others are named however we want
        * Any developer with access to push to our Github repository can push to or create a demo</li>
        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
        ### Dev Server

        1. Refers to `www-dev.allizom.org`
        2. Is updated with every push to `master` branch
          * e.g. a pull-request is merged
        3. All Feature Switches are `on`
        4. The [in-development l10n files](https://github.com/mozilla-l10n/www.mozilla.org) are used
        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
        ### Staging Servers

        * Refers to `www.allizom.org`
        * Is updated with every push to `prod` branch (same as Production)
          * as long as said push is tagged e.g. `2017-03-12.1`
          * we use a script in the repo: `bin/tag-release.sh`
        * Meant as a test of deployment and should always match Production as closely as possible
        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
        ### Production Servers

        There are [several stages to a production deploy](https://ci.us-west.moz.works/blue/organizations/jenkins/bedrock_multibranch_pipeline/detail/prod/36/pipeline):

        1. Test all of the code
        2. Deploy to Staging
        3. Run integration tests against Staging
        4. Deploy to Production
        5. Run integration tests against Production
        6. Do steps 2 - 5 again for other server cluster
        </script>
      </section>
    </section>

    <section>
      <section>
        <h2>A/B Testing</h2>
      </section>
    </section>

    <section>
      <section>
        <h2>Analytics</h2>
      </section>
    </section>

    <section>
      <section>
        <h2>Feature Switches</h2>
      </section>
    </section>
  </div>
</div>

<script src="../lib/reveal/lib/js/head.min.js"></script>
<script src="../lib/reveal/js/reveal.js"></script>

<script>
  // More info https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    history: true,
    transition: 'convex',

    // More info https://github.com/hakimel/reveal.js#dependencies
    dependencies: [
      {src: '../lib/reveal/plugin/markdown/marked.js'},
      {src: '../lib/reveal/plugin/markdown/markdown.js'},
      {src: '../lib/reveal/plugin/notes/notes.js', async: true},
      {
        src: '../lib/reveal/plugin/highlight/highlight.js', async: true,
        callback: function () {
          hljs.initHighlightingOnLoad();
        }
      }
    ]
  });
</script>
</body>
</html>
